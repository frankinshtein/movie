MAGIC 4
VERSION I32

MOVIE_NAME S

RESOURCE_ID Z
{
    (RESOURCE_TYPE)
    {
        1 INTERNAL
        {       
            NAME S
        }
        2 SOCKET_SHAPE
        {   
            POLYGON FN2 N
        }
        3 SOCKET_IMAGE    
        {
            PATH S
        }
        4 SOLID
        {
            WIDTH F
            HEIGHT F
            R F
            G F
            B F
        }
        5 VIDEO
        {
            PATH S
            ALPHA I8
            FRAME_RATE F
            DURATION F
        }
        6 SOUND
        {
            PATH S
            DURATION F 
        }
        7 IMAGE
        {
            PATH S
            BASE_WIDTH F
            BASE_HEIGHT F
            TRIM_WIDTH F
            TRIM_HEIGHT F
            TRIM_OFFSET_X F
            TRIM_OFFSET_Y F
        }
        8 IMAGE_SEQUENCE
        {
            FRAME_DURATION F
        
            COUNT Z
            {
                RESOURCE_ID Z            
            }
        }
    }
}

COMPOSITION_COUNT Z
{
    NAME S
    WIDTH F
    HEIGHT F
    
    FRAME_DURATION F
    DURATION F
    
    [FLAG]
    {
        1 LOOP_SEGMENT F2
        2 ANCHOR_POINT F3
        3 OFFSET_POINT F3
        4 BOUNDS F4        
    }

    LAYER_COUNT Z    
    {
        NAME S
        INDEX Z
        TYPE_ID I8
        
        $N FRAME_COUNT I32        
        
        [EXTENSION]
        {
            1 TIME_REMAPING
            {   
                IMMUTABLE B                
                TIME F $N
            }
            2 IMAGE_MESH 
            {            
                IMMUTABLE B
                MESH M $N
            }
            3 POLYGON
            {
                IMMUTABLE B
                POLYGON P $N                
            }
            4 VIEWPORT
            {
                IMMUTABLE B
                VIEWPORT F4 $N
            }
        }
        
        RESOURCE_ID Z
        
        PARENT Z
        
        START_TIME F
        IN_TIME F
        OUT_TIME F
        
        BLEND_MODE I8
        PARAMS I32
        
        PLAY_COUNT Z
        
        STRETCH F
        
        [[PROPERTIES]]
        {
            1 ANCHOR_POINT F3
            2 POSITION F3
            3 SCALE F3
            4 QUATERNION F4
            5 OPACITY F
            6 VOLUME F
        }        
    }
}